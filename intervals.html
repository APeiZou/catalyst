

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Pricing Data Intervals &mdash; Catalyst 0.5.19 documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Example Algorithms" href="example-algos.html" />
    <link rel="prev" title="Live Trading" href="live-trading.html" /> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> Catalyst
          

          
          </a>

          
            
            
              <div class="version">
                0.5.19
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="install.html">Install</a></li>
<li class="toctree-l1"><a class="reference internal" href="beginner-tutorial.html">Catalyst Beginner Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="live-trading.html">Live Trading</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Pricing Data Intervals</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#stock-trading">Stock trading</a></li>
<li class="toctree-l2"><a class="reference internal" href="#crypto-trading">Crypto trading</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="example-algos.html">Example Algorithms</a></li>
<li class="toctree-l1"><a class="reference internal" href="utilities.html">Utilities</a></li>
<li class="toctree-l1"><a class="reference internal" href="videos.html">Videos</a></li>
<li class="toctree-l1"><a class="reference internal" href="resources.html">Resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="development-guidelines.html">Development Guidelines</a></li>
<li class="toctree-l1"><a class="reference internal" href="releases.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="appendix.html">API Reference</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Catalyst</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Pricing Data Intervals</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/intervals.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="pricing-data-intervals">
<h1>Pricing Data Intervals<a class="headerlink" href="#pricing-data-intervals" title="Permalink to this headline">¶</a></h1>
<p>Pricing data for any asset is aggregated and stored in predetermined units of time, which are referred to as intervals or bars in a chart. Each single bar or interval captures the price movement of an asset and contains the open, high, low and closing prices for the specified period of time. For example, if a trader is working with daily data, one interval captures the price movements for one day. Analogously, if a trader is working with minute data, each interval captures the price movements for one minute.</p>
<p>It is important to understand the precise definition of these units of time as it affects your trading decisions. We are using the mathematical definition of <a class="reference external" href="https://en.wikipedia.org/wiki/Interval_(mathematics)">interval</a> to define a set of numbers (times) with the property that any number that lies between two numbers (start time and end time) in the set is also included in the set. The question arises in determining whether the endpoints are included in the interval or not, that is whether the intervals are open or closed.</p>
<p>For example, a day is defined to start at <code class="docutils literal"><span class="pre">00:00:00</span></code> and end at <code class="docutils literal"><span class="pre">23:59:59</span></code>. This is a left-closed and right-opened interval, which is typically referred to as left-bound or left-closed for short (which matches <a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/generated/pandas.Interval.html">Pandas nomenclature of intervals</a>). This means that midnight of a given day is only included as the endpoint of the starting day, but not the preceding day (the previous day ended right before midnight).</p>
<div class="section" id="stock-trading">
<h2>Stock trading<a class="headerlink" href="#stock-trading" title="Permalink to this headline">¶</a></h2>
<p>Counter-intuitively for novice traders, stock trading uses right-bound intervals. For example, at NYSE trading starts right after 9:30 am and ends at 4pm, and every minute is counted as follows:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="mi">9</span><span class="p">:</span><span class="mi">30</span><span class="p">:</span><span class="mo">00</span> <span class="n">am</span> <span class="o">&lt;</span> <span class="n">t</span> <span class="o">&lt;=</span> <span class="mi">9</span><span class="p">:</span><span class="mi">31</span><span class="p">:</span><span class="mo">00</span> <span class="n">am</span> <span class="n">First</span> <span class="n">minute</span> <span class="n">of</span> <span class="n">a</span> <span class="n">trading</span> <span class="n">day</span>
<span class="mi">9</span><span class="p">:</span><span class="mi">31</span><span class="p">:</span><span class="mo">00</span> <span class="n">am</span> <span class="o">&lt;</span> <span class="n">t</span> <span class="o">&lt;=</span> <span class="mi">9</span><span class="p">:</span><span class="mi">32</span><span class="p">:</span><span class="mo">00</span> <span class="n">am</span>
<span class="mi">9</span><span class="p">:</span><span class="mi">32</span><span class="p">:</span><span class="mo">00</span> <span class="n">am</span> <span class="o">&lt;</span> <span class="n">t</span> <span class="o">&lt;=</span> <span class="mi">9</span><span class="p">:</span><span class="mi">33</span><span class="p">:</span><span class="mo">00</span> <span class="n">am</span>
<span class="o">...</span>
<span class="mi">3</span><span class="p">:</span><span class="mi">59</span><span class="p">:</span><span class="mo">00</span> <span class="n">pm</span> <span class="o">&lt;</span> <span class="n">t</span> <span class="o">&lt;=</span> <span class="mi">4</span><span class="p">:</span><span class="mo">00</span><span class="p">:</span><span class="mo">00</span> <span class="n">pm</span> <span class="n">Last</span> <span class="n">minute</span> <span class="n">of</span> <span class="n">a</span> <span class="n">trading</span> <span class="n">day</span>
</pre></div>
</div>
<p>And each interval is labeled with the ending time as follows:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="mi">9</span><span class="p">:</span><span class="mi">31</span> <span class="n">interval</span><span class="p">:</span> <span class="mi">9</span><span class="p">:</span><span class="mi">30</span><span class="p">:</span><span class="mo">00</span> <span class="n">am</span> <span class="o">&lt;</span> <span class="n">t</span> <span class="o">&lt;=</span> <span class="mi">9</span><span class="p">:</span><span class="mi">31</span><span class="p">:</span><span class="mo">00</span> <span class="n">am</span> <span class="ow">and</span> <span class="ow">is</span> <span class="n">the</span> <span class="n">first</span> <span class="n">minute</span> <span class="n">of</span> <span class="n">a</span> <span class="n">trading</span> <span class="n">day</span>
<span class="mi">9</span><span class="p">:</span><span class="mi">32</span> <span class="n">interval</span><span class="p">:</span> <span class="mi">9</span><span class="p">:</span><span class="mi">31</span><span class="p">:</span><span class="mo">00</span> <span class="n">am</span> <span class="o">&lt;</span> <span class="n">t</span> <span class="o">&lt;=</span> <span class="mi">9</span><span class="p">:</span><span class="mi">32</span><span class="p">:</span><span class="mo">00</span> <span class="n">am</span>
<span class="mi">9</span><span class="p">:</span><span class="mi">33</span> <span class="n">interval</span><span class="p">:</span> <span class="mi">9</span><span class="p">:</span><span class="mi">32</span><span class="p">:</span><span class="mo">00</span> <span class="n">am</span> <span class="o">&lt;</span> <span class="n">t</span> <span class="o">&lt;=</span> <span class="mi">9</span><span class="p">:</span><span class="mi">33</span><span class="p">:</span><span class="mo">00</span> <span class="n">am</span>
<span class="o">...</span>
<span class="mi">4</span><span class="p">:</span><span class="mo">00</span> <span class="n">interval</span><span class="p">:</span> <span class="mi">3</span><span class="p">:</span><span class="mi">59</span><span class="p">:</span><span class="mo">00</span> <span class="n">pm</span> <span class="o">&lt;</span> <span class="n">t</span> <span class="o">&lt;=</span> <span class="mi">4</span><span class="p">:</span><span class="mo">00</span><span class="p">:</span><span class="mo">00</span> <span class="n">pm</span> <span class="ow">and</span> <span class="ow">is</span> <span class="n">the</span> <span class="n">last</span> <span class="n">minute</span> <span class="n">of</span> <span class="n">a</span> <span class="n">trading</span> <span class="n">day</span>
</pre></div>
</div>
<p>Essentially, the pricing data for a given minute interval is always from the previous minute. While this may seem counter-intuitive at first, it helps in preventing a <a class="reference external" href="https://www.investopedia.com/terms/l/lookaheadbias.asp">look-ahead bias</a>. This means that when we trade at any given minute, we only see information that would have been available at the time of the trade (anything prior up to that point).</p>
<p>It is worth noting that in stock trading, day intervals are left-labeled and minute intervals are right-labeled, even though they both are defined right-bounded or right-closed. While this naming may seem inconsistent or problematic at first, it never poses a problem because stock trading is always limited to a set of hours within a day, and never involves 24/7 trading where it would cause confusion right at midnight.</p>
<p>The naming convention defined above is the one that <a class="reference external" href="https://github.com/quantopian/zipline">zipline</a> implements.</p>
</div>
<div class="section" id="crypto-trading">
<h2>Crypto trading<a class="headerlink" href="#crypto-trading" title="Permalink to this headline">¶</a></h2>
<p>Conversely, cryptocurrency trading exchanges use left-bounded (aka left-closed and left-labeled) minute and daily intervals. For example, using the same times defined above, in crypto they would be defined as follows:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="mi">9</span><span class="p">:</span><span class="mi">31</span> <span class="n">interval</span><span class="p">:</span> <span class="mi">9</span><span class="p">:</span><span class="mi">31</span><span class="p">:</span><span class="mo">00</span> <span class="n">am</span> <span class="o">&lt;=</span> <span class="n">t</span> <span class="o">&lt;</span> <span class="mi">9</span><span class="p">:</span><span class="mi">32</span><span class="p">:</span><span class="mo">00</span> <span class="n">am</span>
<span class="mi">9</span><span class="p">:</span><span class="mi">32</span> <span class="n">interval</span><span class="p">:</span> <span class="mi">9</span><span class="p">:</span><span class="mi">32</span><span class="p">:</span><span class="mo">00</span> <span class="n">am</span> <span class="o">&lt;=</span> <span class="n">t</span> <span class="o">&lt;</span> <span class="mi">9</span><span class="p">:</span><span class="mi">33</span><span class="p">:</span><span class="mo">00</span> <span class="n">am</span>
<span class="mi">9</span><span class="p">:</span><span class="mi">33</span> <span class="n">interval</span><span class="p">:</span> <span class="mi">9</span><span class="p">:</span><span class="mi">33</span><span class="p">:</span><span class="mo">00</span> <span class="n">am</span> <span class="o">&lt;=</span> <span class="n">t</span> <span class="o">&lt;</span> <span class="mi">9</span><span class="p">:</span><span class="mi">34</span><span class="p">:</span><span class="mo">00</span> <span class="n">am</span>
<span class="o">...</span>
</pre></div>
</div>
<p>For reference, in zipline when the clock ticks at the beginning of every minute, it uses data from the previous minute (labeled as ending in the current minute). To meet the different nature of the crypto data definition versus the stock market data, Catalyst code had to be altered as follows: when the minute clock ticks at the beginning of every minute <a class="reference external" href="appendix.html#catalyst.protocol.BarData.current">data.current</a> returns the closing price from the previous minute and <a class="reference external" href="appendix.html#catalyst.protocol.BarData.history">data.history</a> last bar matches <a class="reference external" href="appendix.html#catalyst.protocol.BarData.current">data.current</a> providing the price up to the minute prior to the current one.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="example-algos.html" class="btn btn-neutral float-right" title="Example Algorithms" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="live-trading.html" class="btn btn-neutral" title="Live Trading" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Enigma MPC, Inc..

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'0.5.19',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  <script type="text/javascript" src="_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>